<a-entity random-rocks></a-entity>

<script>

AFRAME.registerComponent("random-rocks", {
      init: function () {
        for (let i = 0; i < 15; i++) {
          let rock = document.createElement("a-entity");
          rock.setAttribute("gltf-model", "#rock");
          rock.setAttribute("position", {
            x: Math.random() * 150 - 100,
            y: 0,
            z: Math.random() * 150 - 100,
          });
          rock.setAttribute("scale", "2 3.2 1.6");
          rock.setAttribute("rotation", "0 0 90");
          rock.classList.add("collectible");
          rock.setAttribute("collect-item", "");
          this.el.appendChild(rock);
        }
      },
    });


    let score = 0;

AFRAME.registerComponent("collect-item", {
          init: function () {
            this.el.addEventListener("click", () => {
              this.el.parentNode.removeChild(this.el);
              score++;
              document
                .querySelector("#score")
                .setAttribute("value", "Score: " + score);
              if (score === 10) {
                document
                  .getElementById("popup")
                  .setAttribute("visible", "true");
                hasWon = true;
              }
              console.log("Item collected! Score: " + score);
            });
          },
        });


</script>  

<a-text
            id="score"
            value="Score: 0"
            position="-1.30 0.75 -1"
            color="#FFF"
            scale=".5 .5 .5"
          ></a-text>

    <a-text
              value="Bravo ! Vous avez reussi la mission quotidienne !"
              position="0 0 0.01"
              color="#FFF"
              align="center"
              width="1.8"
            ></a-text>